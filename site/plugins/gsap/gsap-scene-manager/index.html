<!DOCTYPE html>
<!-- BEGIN html --><html lang="en-US">

<!-- BEGIN head -->
<head>

	<!-- Meta Tags -->
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<meta name="generator" content="Hoarder 1.1.1">
<meta name="generator" content="ZillaFramework 1.0.2.5">

	<!-- Title -->
	<title>GSAP Scene Manager | Dave Stewart IO</title>

	<!-- RSS & Pingbacks -->
	<link rel="alternate" type="application/rss+xml" title="Dave Stewart IO RSS Feed" href="/feed/">

	<link rel="dns-prefetch" href="//s.w.org">
<link rel="stylesheet" id="hoarder-style-css" href="/wordpress/wp-content/themes/davestewart/style.css?ver=1.1.1" type="text/css" media="all">
<link rel="stylesheet" id="jquery.lightbox.min.css-css" href="/wordpress/wp-content/plugins/wp-jquery-lightbox/styles/lightbox.min.css?ver=1.4.6" type="text/css" media="all">
<script type="text/javascript" src="/wordpress/wp-includes/js/jquery/jquery.js?ver=1.12.4"></script>
<script type="text/javascript" src="/wordpress/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1"></script>
<script type="text/javascript" src="/wordpress/wp-content/themes/hoarder/js/superfish.js?ver=1.4.8"></script>
<script type="text/javascript" src="/wordpress/wp-content/themes/hoarder/js/supersubs.js?ver=0.2"></script>
<script type="text/javascript" src="/wordpress/wp-content/themes/hoarder/js/jquery.flexslider-min.js?ver=2.0"></script>
<script type="text/javascript" src="/wordpress/wp-content/themes/hoarder/js/jquery.jplayer.min.js?ver=2.1"></script>
<script type="text/javascript" src="/wordpress/wp-content/themes/hoarder/js/jquery.imagesloaded.min.js?ver=2.0.1"></script>
<script type="text/javascript" src="/wordpress/wp-content/themes/hoarder/js/jquery.isotope.min.js?ver=1.5.19"></script>
<script type="text/javascript" src="/wordpress/wp-content/themes/hoarder/js/jquery.fitvids.js?ver=1.0"></script>
<script type="text/javascript" src="/wordpress/wp-content/themes/hoarder/includes/js/twitter.js?ver=4.9.18"></script>
<script type="text/javascript" src="/wordpress/wp-content/themes/davestewart/vendor/jquery/jquery.sticky.js?ver=2.0.1"></script>
<script type="text/javascript" src="/wordpress/wp-content/themes/davestewart/vendor/jquery/jquery.cookie.js?ver=4.9.18"></script>
<script type="text/javascript" src="/wordpress/wp-content/themes/davestewart/assets/js/zilla-media.js?ver=2.0.1"></script>
<script type="text/javascript" src="/wordpress/wp-content/themes/davestewart/assets/js/scripts.js?ver=2.0.1"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/wordpress/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wordpress/wp-includes/wlwmanifest.xml">
<link rel="canonical" href="/plugins/gsap/gsap-scene-manager/">



<style type="text/css">.wp-editor-container{
		border:1px solid #DDD;
		margin-bottom:10px;
	}</style>

<!-- END head -->
</head>

<!-- BEGIN body -->
<body class="post-template-default single single-post postid-981 single-format-standard no-js unknown post-gsap-scene-manager zilla layout-2cr">

	    		<!-- BEGIN #header -->
		<div id="header">

		    <!-- BEGIN .header-inner -->
		    <div class="header-inner">

    			<!-- BEGIN #logo -->
    			<div id="logo">
    				<a href="/">Dave Stewart</a> <span>|</span> <a href="https://davestewart.co.uk/" title="Go to davestewart.co.uk">io</a>
    				<p id="tagline">Research » Tooling » Open Source</p>
    			<!-- END #logo -->
    			</div>


	        <!-- END .header-inner -->
	        </div>

		<!-- END #header-->
		</div>

		<!-- BEGIN .main-navigation -->
		<div class="main-navigation">

		        		<!-- BEGIN #primary-nav -->
    		<div id="primary-nav">
    		    <ul id="primary-menu" class="menu">
<li id="menu-item-373" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-373"><a href="/">Home</a></li>
<li id="menu-item-369" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-369"><a href="/category/frameworks/">Frameworks</a></li>
<li id="menu-item-368" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-368"><a href="/category/tools/">Tools</a></li>
<li id="menu-item-887" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-887"><a href="/all/plugins/">Plugins</a></li>
<li id="menu-item-888" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-888"><a href="/all/extensions/">Extensions</a></li>
<li id="menu-item-1064" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1064"><a href="/category/setup/">Setup</a></li>
<li id="menu-item-977" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-977"><a href="/posts-by-category/">Everything</a></li>
<li id="menu-item-1006" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1006"><a href="/about/">About</a></li>
</ul>
    		    <!-- BEGIN #searchform-->
<form method="get" id="searchform" action="/">
	<fieldset>
		<input type="text" name="s" id="s">
	</fieldset>
<!-- END #searchform-->
</form>    		<!-- END #primary-nav -->
    		</div>

		<!-- END .main-navigation -->
		</div>

		<!-- BEGIN #content -->
		<div id="content" class="clearfix">




<!-- FILE davestewart/single.php -->

			<!-- BEGIN #primary .hfeed-->
			<div id="primary" class="hfeed">

								<!-- BEGIN .hentry -->
				<div class="post-981 post type-post status-publish format-standard has-post-thumbnail hentry category-gsap tag-javascript tag-featured tag-3dsmax-animation tag-html5" id="post-981">

    				<!-- FILE davestewart/content.php -->
<div class="post-thumb">

	<a href="/wordpress/wp-content/uploads/plugins/gsap/gsap-scene-manager/gsap-scene-manager-post.png"><img style="aspect-ratio: 300 / 120;"src="/wordpress/wp-content/uploads/plugins/gsap/gsap-scene-manager/gsap-scene-manager-post-580x232.png" class="attachment-medium size-medium" alt="" ></a>
</div>

    <h1 class="entry-title">GSAP Scene Manager</h1>
	<div class="entry-meta-header">
			</div>



<!-- BEGIN .entry-content -->
<div class="entry-content">

	<h3>Overview</h3>
<p>I thought I would post the results of my foray into a JavaScript scene manager for the <a href="https://greensock.com/">GreenSock Animation Platform</a>.</p>
<p>Here’s the final animation, which is entirely DOM based, which I’m pretty pleased with:</p>
<p style="margin-left: 40px;"><a class="bbc_url" title="External link" href="https://g4scashcollections.com/how-it-works.html" rel="nofollow external">http://g4scashcollections.com/how-it-works.html</a></p>
<p>It uses an HTML/JS framework I developed over the course of a few weeks (and I’ll probably work on some more) and the majority of the animation is of course handled by GSAP, along with animated GIFs, animated in Flash, but exported as PNGs then re-exported from PhotoShop (as it does a better job with colors).</p>
<p>I had planned to build a spritesheet plugin for TweenMax to export animations directly from Flash, but in the end I didn&#039;t get time to do all the character idling animations.</p>
<h3>Structure</h3>
<p>So, the framework consists of various HTML elements with JS logic, which do a pretty good job of mirroring entities in Flash, with some added optimizations around the &#034;story&#034; concept:</p>
<pre class="prettyprint lang- prettyprinted">+ story
    + scene / location
        +- layer
        |  +- group
        +- sprite
            +- tween
            +- animation</pre>
<p>The interesting files to look at in <strong>animation/</strong><strong>assets/js/</strong> (you can use the Chrome debugger Source panel to look at them / set breakpoints) are:</p>
<ul>
<li>
<a class="bbc_url" title="External link" href="https://g4s.davestewart.co.uk/animation/assets/js/story.js" rel="nofollow external">story.js</a> &#8211; manages the adding of all scenes, and handles overall playback, events, etc</li>
<li>
<a class="bbc_url" title="External link" href="https://g4s.davestewart.co.uk/animation/assets/js/scene.js" rel="nofollow external">scene.js</a> &#8211; manages / animates elements within an HTML &#034;scene&#034; or &#034;location&#034; (a global type of scene) element</li>
<li>
<a class="bbc_url" title="External link" href="https://g4s.davestewart.co.uk/animation/assets/js/main.js" rel="nofollow external">main.js</a> &#8211; the main file that sets up ALL the animation with setup / animation functions that are injected into the main Story and Scene classes</li>
<li>
<a class="bbc_url" title="External link" href="https://g4s.davestewart.co.uk/animation/assets/js/application.js" rel="nofollow external">application.js</a> &amp; <a class="bbc_url" title="External link" href="https://g4s.davestewart.co.uk/animation/assets/js/layout.js" rel="nofollow external">layout.js</a> &#8211; top level logic and layout classes, independent of any story-specific setup or animation</li>
</ul>
<p><strong>Scenes</strong> are the core JS classes that manage assets and animations, with <strong>Locations</strong> providing a slightly more specialized version, which serve as a base for &#034;scene&#034; animation to be layered over the top. That allows multiple &#034;scene&#034; animations to use a single &#034;location&#034;, in the same was that a physical set in a theater can have multiple scenes. The hiding and showing of elements within each scene is managed by the framework as each Scene&#039;s animation is reached in the timeline.</p>
<p>I created various helper functions such as <strong>sprite()</strong> and <strong>tween()</strong> to do the leg-work of building HTML and setting attributes, with some more specialized functions such as <strong>van()</strong> to set up complex sprites with animation, like this <a class="bbc_url" title="External link" href="https://codepen.io/davestewart/pen/rwsBa" rel="nofollow external">van example</a>.</p>
<pre class="prettyprint lang-js prettyprinted">function van()
{
    var van         = sprite('van', '/animation/assets/images/objects/van.png', 330, 129);
    var wheel1      = $(sprite('vanWheel1', '/animation/assets/images/objects/van-wheel.png', 46, 46)).css({left:37, top:83}).appendTo(van);
    var wheel2      = $(sprite('vanWheel2', '/animation/assets/images/objects/van-wheel.png', 46, 46)).css({left:252, top:83}).appendTo(van);
    return van;
}
</pre>
<div></div>
<p>That meant a van could easily be added to the scene with a line of code like this:</p>
<pre class="prettyprint lang-js prettyprinted">this.add('fg', van(), 200, 300); // scene.add(layer, element, x, y)</pre>
<h3>Setup and Animation</h3>
<p>All setup and animation is dependency-injected from the main.js file, with all elements being referenced inside an <strong>elements</strong> hash from their HTML name attribute, as they are injected:</p>
<p><img class="bbc_img" src="https://i.imgur.com/hPGzvbV.png" alt="hPGzvbV.png"></p>
<p>As the functions above are injected into an owning Scene instance, the <strong>this</strong> above refers to the actual Scene, and not the window object:</p>
<pre class="prettyprint lang-js prettyprinted">this          // the Scene instance
this.parent   // the Scene's location
this.elements // a hash of named HTML elements within the scene
this.tl       // the TimelineMax instance
this.name     // the name of the scene
</pre>
<p>The hierarchical nature of the framework also means you can reference any element and its animation from anywhere in the app:</p>
<p><img class="bbc_img" src="https://i.imgur.com/CahAJN3.png" alt="CahAJN3.png"></p>
<p>For example:</p>
<pre class="prettyprint lang-js prettyprinted">App.story.locations.office.elements.background
App.story.scenes[4].parent.elements.background
App.story.scenes[4].elements.person
App.story.scenes[4].tl</pre>
<p>You can also see the injected <strong>setup()</strong> and <strong>animate()</strong> functions, and back-references to story and parent (usually a <strong>Location</strong>, though <strong>Scenes </strong>can also be nested inside other <strong>Scenes</strong>).</p>
<p>TimelineMax manages all the animation at a global level, so the entire animation can be scrubbed or navigated around in the browser using a <a class="bbc_url" title="External link" href="https://codepen.io/davestewart/pen/keJpE" rel="nofollow external">GSAP Controller widget</a> I developed for this purpose:</p>
<p><img class="bbc_img" src="https://i.imgur.com/uSTMtYy.png" alt="uSTMtYy.png"></p>
<h3>Conclusion</h3>
<p>Animating this way felt very similar to code-only development in something like FlashDevelop, using both Photshop and Flash to wrangle assets.</p>
<p>I’m interested to know if anyone has any input on this so far, or how I could have done this differently, perhaps by animating in Flash, and exporting using some of the new HTML5 capability (I&#039;ve posted this in the Flash CC Prerelease forum as well, so I hope to get some feedback there too).</p>
<p>If this turns out to be a good way to work, I’ll likely do some more work on the framework, for example allowing elements to be declared directly in the HTML, and will open source it.</p>
<h3>Links</h3>
<ul>
<li><a href="https://greensock.com/forums/topic/9826-animation-scene-manager/">Post on GreenSock.com</a></li>
<li><a href="https://g4scashcollections.com/how-it-works.html">G4S Cash Collections</a></li>
</ul>
<!-- END .entry-content -->
</div>
<!-- FILE davestewart/content-meta.php -->
<!-- BEGIN .entry-meta-footer-->
<div class="entry-meta-footer">
	<!--
    <span class="comment-count">Comments: <span>Comments Off<span class="screen-reader-text"> on GSAP Scene Manager</span></span></span>
    <span class="author">Posted by: <a href="/author/admin/" title="Posts by Dave Stewart" rel="author">Dave Stewart</a></span>
	-->




	<div class="entry-categories">Categories: <a href="/category/plugins/" title="View all posts in Plugins">Plugins</a>, <a href="/category/plugins/gsap/" title="View all posts in GSAP">GSAP</a>
</div>
    <div class="entry-tags">Tags: <a href="/tag/javascript/" rel="tag">JavaScript</a>, <a href="/tag/featured/" rel="tag">Featured</a>, <a href="/tag/3dsmax-animation/" rel="tag">Animation</a>, <a href="/tag/html5/" rel="tag">HTML5</a>
</div>
	<div class="published">Date: <span style="font-weight:normal">August 2014</span>
</div>

<!-- END .entry-meta-footer-->
</div>

                                <!-- END .hentry-->
				</div>


<!-- BEGIN #comments -->
<div id="comments">

		<p class="nocomments">Comments are closed.</p>


<!-- END #comments -->
</div>
				<!-- BEGIN .navigation .single-page-navigation -->
				<div class="navigation single-page-navigation">
					<div class="nav-previous">&larr; <a href="/plugins/wordpress/wordpress-flexible-configuration/" rel="prev">WordPress Flexible Configuration</a>
</div>
					<div class="nav-next">
<a href="/setup/flashdevelop-setup/" rel="next">FlashDevelop setup</a> &rarr;</div>
				<!-- END .navigation .single-page-navigation -->
				</div>

							<!-- END #primary .hfeed-->
			</div>


    		<!-- BEGIN #sidebar .aside-->
		<div id="sidebar" class="aside">

		<div id="ds_related_categories_widget-2" class="widget DS_Related_Categories_Widget">
<h3 class="widget-title">Related categories</h3>
<ul><li><a href="/category/plugins/gsap/">GSAP <span class="meta">2</span></a></li></ul>
</div>
<div id="ds_related_posts_widget-3" class="widget DS_Related_Posts_Widget">
<h3 class="widget-title">Related Posts in GSAP</h3>
<ul>
<li><a href="/plugins/gsap/gsap-scene-manager/">GSAP Scene Manager <span class="meta">2014</span></a></li>
<li><a href="/plugins/gsap/gsap-controller/">GSAP Controller <span class="meta">2014</span></a></li>
</ul>
</div>
<div id="custom_html-2" class="widget_text widget widget_custom_html"><div class="textwidget custom-html-widget"></div></div>
		<!-- END #sidebar .aside-->
		</div>


<!-- FILE davestewart/footer.php -->

        		<!-- END #content -->
		</div>


		<!-- BEGIN #footer -->
		<div id="footer">

		    <!-- BEGIN .footer-inner -->
		    <div class="footer-inner">


		        <!-- BEGIN .footer-col-1 -->
<div class="footer-col-1">

    <div id="ds_links-2" class="widget ds_links">
<h3 class="widget-title">Current site</h3>
<ul><li><a href="https://davestewart.co.uk/">davestewart.co.uk</a></li></ul>
</div>
<!-- END .footer-col-1 -->
</div>

<!-- BEGIN .footer-col-2 -->
<div class="footer-col-2">

    <div id="ds_links-4" class="widget ds_links">
<h3 class="widget-title">Browse Projects</h3>
<ul>
<li><a href="/posts-by-category/">By Category</a></li>
<li><a href="/posts-by-date/">By Date</a></li>
<li>
<a href="/posts-by-tag/">By Tag</a>  </li>
</ul>
</div>
<!-- END .footer-col-2 -->
</div>

<!-- BEGIN .footer-col-3 -->
<div class="footer-col-3">

    <div id="ds_links-3" class="widget ds_links">
<h3 class="widget-title">More Info</h3>
<ul>
<li><a href="https://twitter.com/dave_stewart">Contact</a></li>
<li><a href="/about/">About</a></li>
</ul>
</div>
<!-- END .footer-col-3 -->
</div>

		    <!-- END .footer-inner -->
		    </div>

		    <div class="footer-lower">
		        <div class="footer-inner">
		            <p class="copyright">&copy; Copyright 2015 </p>

		        </div>
		    </div>

		<!-- END #footer -->
		</div>

		<a href="#" id="back-to-top"></a>



	<!-- Theme Hook -->
	<script type="text/javascript">
/* <![CDATA[ */
var zilla = {"ajaxurl":"\/wordpress\/wp-admin\/admin-ajax.php","nonce":"61b4b80d02","loading":"Loading..."};
/* ]]> */
</script>
<script type="text/javascript" src="/wordpress/wp-content/themes/hoarder/js/jquery.custom.js?ver=1.0"></script>
<script type="text/javascript" src="/wordpress/wp-includes/js/comment-reply.min.js?ver=4.9.18"></script>
<script type="text/javascript" src="/wordpress/wp-content/plugins/wp-jquery-lightbox/jquery.touchwipe.min.js?ver=1.4.6"></script>
<script type="text/javascript">
/* <![CDATA[ */
var JQLBSettings = {"showTitle":"1","showCaption":"1","showNumbers":"1","fitToScreen":"0","resizeSpeed":"400","showDownload":"0","navbarOnTop":"0","marginSize":"0","slideshowSpeed":"4000","prevLinkTitle":"previous image","nextLinkTitle":"next image","closeTitle":"close image gallery","image":"Image ","of":" of ","download":"Download","pause":"(pause slideshow)","play":"(play slideshow)"};
/* ]]> */
</script>
<script type="text/javascript" src="/wordpress/wp-content/plugins/wp-jquery-lightbox/jquery.lightbox.min.js?ver=1.4.6"></script>
<script type="text/javascript" src="/wordpress/wp-includes/js/jquery/jquery.color.min.js?ver=2.1.1"></script>
<script type="text/javascript" src="/wordpress/wp-includes/js/wp-embed.min.js?ver=4.9.18"></script>

	<!-- Ran 40 queries 1.69 seconds -->
<!-- END body-->
</body>
<!-- END html-->
</html>
