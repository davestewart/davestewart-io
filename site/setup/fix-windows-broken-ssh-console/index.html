<!DOCTYPE html>
<!-- BEGIN html --><html lang="en-US">
<!-- A ThemeZilla design (http://www.themezilla.com) - Proudly powered by WordPress (http://wordpress.org) -->

<!-- BEGIN head -->
<head>

	<!-- Meta Tags -->
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<meta name="generator" content="Hoarder 1.1.1">
<meta name="generator" content="ZillaFramework 1.0.2.5">

	<!-- Title -->
	<title>Fix Windows broken SSH console output | Dave Stewart IO</title>

	<!-- RSS & Pingbacks -->
	<link rel="alternate" type="application/rss+xml" title="Dave Stewart IO RSS Feed" href="/feed/">
	<link rel="pingback" href="/wordpress/xmlrpc.php">

	<link rel="dns-prefetch" href="//s.w.org">
<link rel="stylesheet" id="hoarder-style-css" href="/wordpress/wp-content/themes/davestewart/style.css?ver=1.1.1" type="text/css" media="all">
<link rel="stylesheet" id="jquery.lightbox.min.css-css" href="/wordpress/wp-content/plugins/wp-jquery-lightbox/styles/lightbox.min.css?ver=1.4.6" type="text/css" media="all">
<script type="text/javascript" src="/wordpress/wp-includes/js/jquery/jquery.js?ver=1.12.4"></script>
<script type="text/javascript" src="/wordpress/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1"></script>
<script type="text/javascript" src="/wordpress/wp-content/themes/hoarder/js/superfish.js?ver=1.4.8"></script>
<script type="text/javascript" src="/wordpress/wp-content/themes/hoarder/js/supersubs.js?ver=0.2"></script>
<script type="text/javascript" src="/wordpress/wp-content/themes/hoarder/js/jquery.flexslider-min.js?ver=2.0"></script>
<script type="text/javascript" src="/wordpress/wp-content/themes/hoarder/js/jquery.jplayer.min.js?ver=2.1"></script>
<script type="text/javascript" src="/wordpress/wp-content/themes/hoarder/js/jquery.imagesloaded.min.js?ver=2.0.1"></script>
<script type="text/javascript" src="/wordpress/wp-content/themes/hoarder/js/jquery.isotope.min.js?ver=1.5.19"></script>
<script type="text/javascript" src="/wordpress/wp-content/themes/hoarder/js/jquery.fitvids.js?ver=1.0"></script>
<script type="text/javascript" src="/wordpress/wp-content/themes/hoarder/includes/js/twitter.js?ver=4.9.18"></script>
<script type="text/javascript" src="/wordpress/wp-content/themes/davestewart/vendor/jquery/jquery.sticky.js?ver=2.0.1"></script>
<script type="text/javascript" src="/wordpress/wp-content/themes/davestewart/vendor/jquery/jquery.cookie.js?ver=4.9.18"></script>
<script type="text/javascript" src="/wordpress/wp-content/themes/davestewart/assets/js/zilla-media.js?ver=2.0.1"></script>
<script type="text/javascript" src="/wordpress/wp-content/themes/davestewart/assets/js/scripts.js?ver=2.0.1"></script>
<link rel="https://api.w.org/" href="/wp-json/">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/wordpress/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wordpress/wp-includes/wlwmanifest.xml">
<link rel="canonical" href="/setup/fix-windows-broken-ssh-console/">
<link rel="shortlink" href="/?p=1042">
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Fsetup%2Ffix-windows-broken-ssh-console%2F">
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Fsetup%2Ffix-windows-broken-ssh-console%2F&#038;format=xml">

<style type="text/css">.wp-editor-container{
		border:1px solid #DDD;
		margin-bottom:10px;
	}</style>

<!-- END head -->
</head>

<!-- BEGIN body -->
<body class="post-template-default single single-post postid-1042 single-format-standard no-js unknown post-fix-windows-broken-ssh-console zilla layout-2cr">

	    		<!-- BEGIN #header -->
		<div id="header">

		    <!-- BEGIN .header-inner -->
		    <div class="header-inner">

    			<!-- BEGIN #logo -->
    			<div id="logo">
    				<a href="/">Dave Stewart</a> <span>|</span> <a href="http://davestewart.co.uk/" title="Go to davestewart.co.uk">io</a>
    				<p id="tagline">Research » Tooling » Open Sorcery</p>
    			<!-- END #logo -->
    			</div>


	        <!-- END .header-inner -->
	        </div>

		<!-- END #header-->
		</div>

		<!-- BEGIN .main-navigation -->
		<div class="main-navigation">

		        		<!-- BEGIN #primary-nav -->
    		<div id="primary-nav">
    		    <ul id="primary-menu" class="menu">
<li id="menu-item-373" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-373"><a href="/">Home</a></li>
<li id="menu-item-369" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-369"><a href="/category/frameworks/">Frameworks</a></li>
<li id="menu-item-368" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-368"><a href="/category/tools/">Tools</a></li>
<li id="menu-item-887" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-887"><a href="/all/plugins/">Plugins</a></li>
<li id="menu-item-888" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-888"><a href="/all/extensions/">Extensions</a></li>
<li id="menu-item-1064" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-1064"><a href="/category/setup/">Setup</a></li>
<li id="menu-item-977" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-977"><a href="/posts-by-category/">Everything</a></li>
<li id="menu-item-1006" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1006"><a href="/about/">About</a></li>
</ul>
    		    <!-- BEGIN #searchform-->
<form method="get" id="searchform" action="/">
	<fieldset>
		<input type="text" name="s" id="s">
	</fieldset>
<!-- END #searchform-->
</form>    		<!-- END #primary-nav -->
    		</div>

		<!-- END .main-navigation -->
		</div>

		<!-- BEGIN #content -->
		<div id="content" class="clearfix">




<!-- FILE davestewart/single.php -->

			<!-- BEGIN #primary .hfeed-->
			<div id="primary" class="hfeed">

								<!-- BEGIN .hentry -->
				<div class="post-1042 post type-post status-publish format-standard hentry category-setup tag-windows" id="post-1042">

    				<!-- FILE davestewart/content.php -->
<div class="post-thumb">

	<a href="/wordpress/wp-content/uploads/blog/fix-windows-broken-ssh/feature.png"><img width="300" height="155" src="/wordpress/wp-content/uploads/blog/fix-windows-broken-ssh/feature-580x300.png" class="attachment-medium size-medium" alt="" srcset="/wordpress/wp-content/uploads/blog/fix-windows-broken-ssh/feature.png 580w, /wordpress/wp-content/uploads/blog/fix-windows-broken-ssh/feature-260x134.png 260w" sizes="(max-width: 300px) 100vw, 300px"></a>
</div>

    <h1 class="entry-title">Fix Windows broken SSH console output</h1>
	<div class="entry-meta-header">
			</div>



<!-- BEGIN .entry-content -->
<div class="entry-content">

	<h3>Overview</h3>
<p>If you&#039;re developing sites using a VM on Windows, you&#039;re no doubt having to SSH into the box to accomplish various tasks; I do this with Laravel&#039;s Homestead.</p>
<p>Unfortunately, the experience on Windows (as opposed to Mac) seems to be <strong>completely broken</strong> with 2 show-stopping issues:</p>
<ol>
<li>Seemingly random characters</li>
<li>Garbled / overwritten output</li>
</ol>
<h3>Problem</h3>
<p>In the vanilla Windows console, pretty much as soon as you start typing within the SSH session, you&#039;re seeing chains of random characters eating your input and making it impossible to do anything meaningful:</p>
<p><a href="/wordpress/wp-content/uploads/blog/fix-terribly-broken-console-ssh-experience-on-windows/escape-characters.png" rel="lightbox[1042]"><img class="alignnone wp-image-1045 size-full" src="/wordpress/wp-content/uploads/blog/fix-terribly-broken-console-ssh-experience-on-windows/escape-characters.png" alt="" width="900" height="300" srcset="/wordpress/wp-content/uploads/blog/fix-terribly-broken-console-ssh-experience-on-windows/escape-characters.png 900w, /wordpress/wp-content/uploads/blog/fix-terribly-broken-console-ssh-experience-on-windows/escape-characters-260x87.png 260w, /wordpress/wp-content/uploads/blog/fix-terribly-broken-console-ssh-experience-on-windows/escape-characters-580x193.png 580w, /wordpress/wp-content/uploads/blog/fix-terribly-broken-console-ssh-experience-on-windows/escape-characters-768x256.png 768w" sizes="(max-width: 900px) 100vw, 900px"></a></p>
<p>These are &#034;control codes&#034;, sent by the UNIX VM to display colors, or inserted as you hit keys like delete or cursor left, right, etc.</p>
<p>Even worse, when editing text files using something like Nano, typing or navigation overwrites content. Page up and page down can completely destroy what&#039;s on screen:</p>
<p><img class="alignnone size-full wp-image-1044" src="/wordpress/wp-content/uploads/blog/fix-terribly-broken-console-ssh-experience-on-windows/overwriting.png" alt="overwriting" width="900" height="300" srcset="/wordpress/wp-content/uploads/blog/fix-terribly-broken-console-ssh-experience-on-windows/overwriting.png 900w, /wordpress/wp-content/uploads/blog/fix-terribly-broken-console-ssh-experience-on-windows/overwriting-260x87.png 260w, /wordpress/wp-content/uploads/blog/fix-terribly-broken-console-ssh-experience-on-windows/overwriting-580x193.png 580w, /wordpress/wp-content/uploads/blog/fix-terribly-broken-console-ssh-experience-on-windows/overwriting-768x256.png 768w" sizes="(max-width: 900px) 100vw, 900px"></p>
<p>This comes down (apparently) to the fact that cmd.exe is a console, not a terminal (and doesn&#039;t emulate one either).</p>
<p>Either way, it makes getting anything done impossible at best, and downright dangerous at worst &#8211; but fortunately it is solvable.</p>
<p>The solution comes in 2 parts:</p>
<ol>
<li>Install a terminal emulator to fix control codes and display colors</li>
<li>Use a different SSH client to Windows&#039; own to fix overwriting</li>
</ol>
<h3>Fix control codes: Install a terminal emulator</h3>
<p>There are lots of these around, but the two I&#039;ve got best results from seem to be <a href="https://conemu.github.io/">ConEmu</a> and <a href="http://cmder.net/">Cmdr</a> (which uses ConEmu behind the scenes).</p>
<p>Get one of these installed (I&#039;ve been using ComEmu the most) and then set Windows to use ConEmu by default, by opening Settings &gt; Integration &gt; Default terminal and clicking the &#034;Force ConEmu as default terminal for console applications&#034;:</p>
<p><a href="/wordpress/wp-content/uploads/blog/fix-windows-broken-ssh/conemu-settings.png" rel="lightbox[1042]"><img class="alignnone size-full wp-image-1046" src="/wordpress/wp-content/uploads/blog/fix-windows-broken-ssh/conemu-settings.png" alt="conemu settings" width="640" height="474" srcset="/wordpress/wp-content/uploads/blog/fix-windows-broken-ssh/conemu-settings.png 640w, /wordpress/wp-content/uploads/blog/fix-windows-broken-ssh/conemu-settings-260x193.png 260w, /wordpress/wp-content/uploads/blog/fix-windows-broken-ssh/conemu-settings-580x430.png 580w" sizes="(max-width: 640px) 100vw, 640px"></a></p>
<p>As a bonus, both emulators support multiple tabs, attractive colour schemes, shortcut keys, and have multiple other usability features.</p>
<p>Not sure how to make PHPStorm use ConEmu yet, but it would be really useful.</p>
<h3>Fix overwriting: Use a different SSH client</h3>
<p>The overwriting issue seems to be caused entirely by Windows&#039; own SSH client.</p>
<p>Connecting to the VM with anything other than this solves the problem. I&#039;ve now connected with both PuTTY and Git&#039;s OpenSSH and they both work.</p>
<p>However, if you&#039;re using Laravel and Homestead, it seems to bypass any changes you make to your default SSH client (even when changing the PATH) so you will now need to log in manually, rather than just typing <code>homestead ssh</code> (but the results are worth it).</p>
<h4>Option 1: PuTTY</h4>
<p>Using the instructions <a href="https://github.com/Varying-Vagrant-Vagrants/VVV/wiki/Connect-to-Your-Vagrant-Virtual-Machine-with-PuTTY">here</a> (and <a href="http://stackoverflow.com/questions/9885108/ssh-to-vagrant-box-in-windows">here</a>), you can run up an SSH session each time you want to connect. Use the following settings:</p>
<ul>
<li>Host: 127.0.0.1</li>
<li>Port: 2222</li>
</ul>
<p>When prompted:</p>
<ul>
<li>Username: vagrant</li>
<li>Password: vagrant</li>
</ul>
<p>You will then be logged in.</p>
<h4>Option 2: OpenSSH</h4>
<p>Using this method, you can save the code as a shortcut.</p>
<p>Save the following code as a .bat file, making sure the path to OpenSSH is correct (I&#039;m using the one that came with Git):</p>
<pre>cd C:\Program Files (x86)\Git\bin
ssh vagrant@127.0.0.1 -p 2222</pre>
<p>The first time you run it, right click on the file and select &#034;run as administrator&#034; to add the host to the list of known hosts.</p>
<p>When the console pops up enter the password &#034;vagrant&#034; and you&#039;re in.</p>
<h4>Option 3: Launch OpenSSH sessions directly within ConEmu</h4>
<p>You can set up a ConEmu task to start a problem-free OpenSSH session automatically.</p>
<ol>
<li>Open ConEmu&#039;s settings</li>
<li>Go to Startup &gt; Tasks</li>
<li>Create a new task using the + button</li>
<li>Name your task &#034;Vagrant&#034;</li>
<li>Paste the above code in the &#034;Commands&#034; box</li>
<li>Save your settings</li>
</ol>
<p><a href="/wordpress/wp-content/uploads/blog/fix-windows-broken-ssh/conemu-settings-run.png" rel="lightbox[1042]"><img class="alignnone size-full wp-image-1048" src="/wordpress/wp-content/uploads/blog/fix-windows-broken-ssh/conemu-settings-run.png" alt="conemu-settings-run" width="640" height="474" srcset="/wordpress/wp-content/uploads/blog/fix-windows-broken-ssh/conemu-settings-run.png 640w, /wordpress/wp-content/uploads/blog/fix-windows-broken-ssh/conemu-settings-run-260x193.png 260w, /wordpress/wp-content/uploads/blog/fix-windows-broken-ssh/conemu-settings-run-580x430.png 580w" sizes="(max-width: 640px) 100vw, 640px"></a></p>
<p>You can then pop open an SSH session from ConEmu by going to the &#034;Create new console&#034; dropdown and selecting your task there:</p>
<p><a href="/wordpress/wp-content/uploads/blog/fix-windows-broken-ssh/conemu-run.png" rel="lightbox[1042]"><img class="alignnone size-full wp-image-1049" src="/wordpress/wp-content/uploads/blog/fix-windows-broken-ssh/conemu-run.png" alt="conemu-run" width="801" height="485" srcset="/wordpress/wp-content/uploads/blog/fix-windows-broken-ssh/conemu-run.png 801w, /wordpress/wp-content/uploads/blog/fix-windows-broken-ssh/conemu-run-260x157.png 260w, /wordpress/wp-content/uploads/blog/fix-windows-broken-ssh/conemu-run-580x351.png 580w, /wordpress/wp-content/uploads/blog/fix-windows-broken-ssh/conemu-run-768x465.png 768w" sizes="(max-width: 801px) 100vw, 801px"></a></p>
<h3> Summing up</h3>
<p>I&#039;ve been using Windows console to SSH into VMs for about a year now, and it&#039;s been awful. This is especially galling as the experience on the Mac is just so much better.</p>
<p>However, if I need to quickly jump into a project and I&#039;m not using OSX, this is the way to do it.</p>
<p>What a relief!</p>
<p>&nbsp;</p>
<!-- END .entry-content -->
</div>
<!-- FILE davestewart/content-meta.php -->
<!-- BEGIN .entry-meta-footer-->
<div class="entry-meta-footer">
	<!--
    <span class="comment-count">Comments: <span>Comments Off<span class="screen-reader-text"> on Fix Windows broken SSH console output</span></span></span>
    <span class="author">Posted by: <a href="/author/admin/" title="Posts by Dave Stewart" rel="author">Dave Stewart</a></span>
	-->




	<div class="entry-categories">Categories: <a href="/category/setup/" title="View all posts in Setup">Setup</a>
</div>
    <div class="entry-tags">Tags: <a href="/tag/windows/" rel="tag">Windows</a>
</div>
	<div class="published">Date: <span style="font-weight:normal">October 2015</span>
</div>

<!-- END .entry-meta-footer-->
</div>

                                <!-- END .hentry-->
				</div>


<!-- BEGIN #comments -->
<div id="comments">

		<p class="nocomments">Comments are closed.</p>


<!-- END #comments -->
</div>
				<!-- BEGIN .navigation .single-page-navigation -->
				<div class="navigation single-page-navigation">
					<div class="nav-previous">&larr; <a href="/setup/sourceview-indentation-fix/" rel="prev">Github &#038; Bitbucket indentation fix</a>
</div>
					<div class="nav-next">
<a href="/setup/configuring-sites-in-laravel-homestead/" rel="next">Configuring sites in Laravel Homestead</a> &rarr;</div>
				<!-- END .navigation .single-page-navigation -->
				</div>

							<!-- END #primary .hfeed-->
			</div>


    		<!-- BEGIN #sidebar .aside-->
		<div id="sidebar" class="aside">

		<div id="ds_related_categories_widget-2" class="widget DS_Related_Categories_Widget">
<h3 class="widget-title">Related categories</h3>
<ul><li><a href="/category/setup/">Setup <span class="meta">6</span></a></li></ul>
</div>
<div id="ds_related_posts_widget-3" class="widget DS_Related_Posts_Widget">
<h3 class="widget-title">Related Posts in Setup</h3>
<ul>
<li><a href="/setup/wordpress-contact-form-setup/">WordPress contact form setup <span class="meta">2018</span></a></li>
<li><a href="/setup/extract-libraries-to-their-own-repositories/">Extract project libraries to their own git repositories  <span class="meta">2016</span></a></li>
<li><a href="/setup/configuring-sites-in-laravel-homestead/">Configuring sites in Laravel Homestead <span class="meta">2015</span></a></li>
<li><a href="/setup/fix-windows-broken-ssh-console/">Fix Windows broken SSH console output <span class="meta">2015</span></a></li>
<li><a href="/setup/sourceview-indentation-fix/">Github & Bitbucket indentation fix <span class="meta">2015</span></a></li>
<li><a href="/setup/flashdevelop-setup/">FlashDevelop setup <span class="meta">2014</span></a></li>
</ul>
</div>
<div id="custom_html-2" class="widget_text widget widget_custom_html"><div class="textwidget custom-html-widget"></div></div>
		<!-- END #sidebar .aside-->
		</div>


<!-- FILE davestewart/footer.php -->

        		<!-- END #content -->
		</div>


		<!-- BEGIN #footer -->
		<div id="footer">

		    <!-- BEGIN .footer-inner -->
		    <div class="footer-inner">


		        <!-- BEGIN .footer-col-1 -->
<div class="footer-col-1">

    <div id="ds_links-2" class="widget ds_links">
<h3 class="widget-title">Commercial Portfolio</h3>
<ul><li><a href="http://davestewart.co.uk/">davestewart.co.uk</a></li></ul>
</div>
<!-- END .footer-col-1 -->
</div>

<!-- BEGIN .footer-col-2 -->
<div class="footer-col-2">

    <div id="ds_links-4" class="widget ds_links">
<h3 class="widget-title">Browse Projects</h3>
<ul>
<li><a href="/posts-by-category/">By Category</a></li>
<li><a href="/posts-by-date/">By Date</a></li>
<li>
<a href="/posts-by-tag/">By Tag</a>  </li>
</ul>
</div>
<!-- END .footer-col-2 -->
</div>

<!-- BEGIN .footer-col-3 -->
<div class="footer-col-3">

    <div id="ds_links-3" class="widget ds_links">
<h3 class="widget-title">More Info</h3>
<ul>
<li><a href="https://twitter.com/dave_stewart">Contact</a></li>
<li><a href="/about/">About</a></li>
</ul>
</div>
<!-- END .footer-col-3 -->
</div>

		    <!-- END .footer-inner -->
		    </div>

		    <div class="footer-lower">
		        <div class="footer-inner">
		            <p class="copyright">&copy; Copyright 2022. Powered by <a href="http://wordpress.org/">WordPress</a></p>

		        </div>
		    </div>

		<!-- END #footer -->
		</div>

		<a href="#" id="back-to-top"></a>



	<!-- Theme Hook -->
	<script type="text/javascript">
/* <![CDATA[ */
var zilla = {"ajaxurl":"\/wordpress\/wp-admin\/admin-ajax.php","nonce":"61b4b80d02","loading":"Loading..."};
/* ]]> */
</script>
<script type="text/javascript" src="/wordpress/wp-content/themes/hoarder/js/jquery.custom.js?ver=1.0"></script>
<script type="text/javascript" src="/wordpress/wp-includes/js/comment-reply.min.js?ver=4.9.18"></script>
<script type="text/javascript" src="/wordpress/wp-content/plugins/wp-jquery-lightbox/jquery.touchwipe.min.js?ver=1.4.6"></script>
<script type="text/javascript">
/* <![CDATA[ */
var JQLBSettings = {"showTitle":"1","showCaption":"1","showNumbers":"1","fitToScreen":"0","resizeSpeed":"400","showDownload":"0","navbarOnTop":"0","marginSize":"0","slideshowSpeed":"4000","prevLinkTitle":"previous image","nextLinkTitle":"next image","closeTitle":"close image gallery","image":"Image ","of":" of ","download":"Download","pause":"(pause slideshow)","play":"(play slideshow)"};
/* ]]> */
</script>
<script type="text/javascript" src="/wordpress/wp-content/plugins/wp-jquery-lightbox/jquery.lightbox.min.js?ver=1.4.6"></script>
<script type="text/javascript" src="/wordpress/wp-includes/js/jquery/jquery.color.min.js?ver=2.1.1"></script>
<script type="text/javascript" src="/wordpress/wp-includes/js/wp-embed.min.js?ver=4.9.18"></script>

	<!-- Ran 38 queries 1.88 seconds -->
<!-- END body-->
</body>
<!-- END html-->
</html>
